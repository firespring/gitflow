#!/bin/bash

test_story_base_functionality()
{
  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE START -----------------"
  echo "------------------------------------------------------"
  git flow feature start $FEATURE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------- EXECUTING STORY START ------------------"
  echo "------------------------------------------------------"
  git flow story start $FEATURE1 $STORY1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE START -----------------"
  echo "------------------------------------------------------"
  git flow release start $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------- EXECUTING STORY FINISH -----------------"
  echo "------------------------------------------------------"
  git flow story finish $STORY1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow feature finish $FEATURE1 $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow release finish $RELEASE1
  echo "--------------------- DONE ---------------------------"
}

test_story_multiple()
{
  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE START -----------------"
  echo "------------------------------------------------------"
  git flow feature start $FEATURE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------- EXECUTING STORY START ------------------"
  echo "------------------------------------------------------"
  git flow story start $FEATURE1 $STORY1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------- EXECUTING STORY LIST  ------------------"
  echo "------------------------------------------------------"
  git flow story list $FEATURE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE START -----------------"
  echo "------------------------------------------------------"
  git flow feature start $FEATURE2
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------- EXECUTING STORY LIST  ------------------"
  echo "------------------------------------------------------"
  git flow story list $FEATURE2
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------- EXECUTING STORY START ------------------"
  echo "------------------------------------------------------"
  git flow story start $FEATURE2 $STORY2
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------- EXECUTING STORY START ------------------"
  echo "------------------------------------------------------"
  git flow story start --nopublish $FEATURE2 $STORY3
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------- EXECUTING STORY LIST  ------------------"
  echo "------------------------------------------------------"
  git flow story list $FEATURE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING STORY PUBLISH -----------------"
  echo "------------------------------------------------------"
  git flow story publish $STORY3
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE START -----------------"
  echo "------------------------------------------------------"
  git flow release start $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------- EXECUTING STORY FINISH -----------------"
  echo "------------------------------------------------------"
  git flow story finish $STORY2
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------- EXECUTING STORY FINISH -----------------"
  echo "------------------------------------------------------"
  git flow story finish $STORY3
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------- EXECUTING STORY FINISH -----------------"
  echo "------------------------------------------------------"
  git flow story finish $STORY1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow feature finish $FEATURE1 $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow feature finish $FEATURE2 $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow release finish $RELEASE1
  echo "--------------------- DONE ---------------------------"
}

test_story_finish_keep()
{
  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE START -----------------"
  echo "------------------------------------------------------"
  git flow feature start $FEATURE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------- EXECUTING STORY START ------------------"
  echo "------------------------------------------------------"
  git flow story start $FEATURE1 $STORY1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE START -----------------"
  echo "------------------------------------------------------"
  git flow release start $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING STORY FINISH ----------------"
  echo "------------------------------------------------------"
  git flow story finish --keep $STORY1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING STORY FINISH ----------------"
  echo "------------------------------------------------------"
  git flow story finish --keep $STORY1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING STORY DELETE ----------------"
  echo "------------------------------------------------------"
  git flow story delete $STORY1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow feature finish $FEATURE1 $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow release finish $RELEASE1
  echo "--------------------- DONE ---------------------------"
}

set -e
. ./init.sh

pushd $TEST_DIR

test_story_base_functionality
test_story_multiple
test_story_finish_keep

popd

