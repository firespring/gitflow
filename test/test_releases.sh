#!/bin/bash

test_release_base_functionality()
{
  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE START -----------------"
  echo "------------------------------------------------------"
  git flow release start $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow release finish $RELEASE1
  echo "--------------------- DONE ---------------------------"
}

test_release_multiple()
{
  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE LIST  -----------------"
  echo "------------------------------------------------------"
  git flow release
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE START -----------------"
  echo "------------------------------------------------------"
  git flow release start $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE LIST  -----------------"
  echo "------------------------------------------------------"
  git flow release list
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE START -----------------"
  echo "------------------------------------------------------"
  git flow release start $RELEASE2
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "----- EXECUTING RELEASE START (no publish) -----------"
  echo "------------------------------------------------------"
  git flow release start --nopublish $RELEASE3
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE LIST  -----------------"
  echo "------------------------------------------------------"
  git flow release list
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "----------- EXECUTING RELEASE PUBLISH ----------------"
  echo "------------------------------------------------------"
  git flow release publish $RELEASE3
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow release finish $RELEASE2
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow release finish $RELEASE3
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow release finish $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE LIST  -----------------"
  echo "------------------------------------------------------"
  git flow release list
  echo "--------------------- DONE ---------------------------"
}

test_release_modification()
{
  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE START -----------------"
  echo "------------------------------------------------------"
  git flow release start $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "---------- EXECUTING RELEASE CHECKOUT ----------------"
  echo "------------------------------------------------------"
  git flow release checkout $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE START -----------------"
  echo "------------------------------------------------------"
  git flow feature start $FEATURE1 $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow feature finish $FEATURE1 $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow release finish $RELEASE1
  echo "--------------------- DONE ---------------------------"
}

set -e
. ./init.sh

pushd $TEST_DIR

test_release_base_functionality
test_release_multiple
test_release_modification

popd

