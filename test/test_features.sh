#!/bin/bash

test_feature_base_functionality()
{
  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE START -----------------"
  echo "------------------------------------------------------"
  git flow feature start $FEATURE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE START -----------------"
  echo "------------------------------------------------------"
  git flow release start $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow feature finish $FEATURE1 $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow release finish $RELEASE1
  echo "--------------------- DONE ---------------------------"
}

test_feature_multiple()
{
  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE LIST  -----------------"
  echo "------------------------------------------------------"
  git flow feature
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE START -----------------"
  echo "------------------------------------------------------"
  git flow feature start $FEATURE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE LIST  -----------------"
  echo "------------------------------------------------------"
  git flow feature list
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE START -----------------"
  echo "------------------------------------------------------"
  git flow feature start $FEATURE2
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE START -----------------"
  echo "------------------------------------------------------"
  git flow feature start --nopublish $FEATURE3
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE LIST  -----------------"
  echo "------------------------------------------------------"
  git flow feature list
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "----------- EXECUTING FEATURE PUBLISH ----------------"
  echo "------------------------------------------------------"
  git flow feature publish $FEATURE3
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE START -----------------"
  echo "------------------------------------------------------"
  git flow release start $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow feature finish $FEATURE2 $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow feature finish $FEATURE3 $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow feature finish $FEATURE1 $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow release finish $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE LIST  -----------------"
  echo "------------------------------------------------------"
  git flow feature list
  echo "--------------------- DONE ---------------------------"
}

test_feature_finish_keep()
{
  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE START -----------------"
  echo "------------------------------------------------------"
  git flow feature start $FEATURE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE START -----------------"
  echo "------------------------------------------------------"
  git flow release start $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow feature finish --keep $FEATURE1 $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow feature finish --keep $FEATURE1 $RELEASE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING FEATURE DELETE ----------------"
  echo "------------------------------------------------------"
  git flow feature delete $FEATURE1
  echo "--------------------- DONE ---------------------------"


  echo -e "\n\n"
  echo "------------------------------------------------------"
  echo "------------ EXECUTING RELEASE FINISH ----------------"
  echo "------------------------------------------------------"
  git flow release finish $RELEASE1
  echo "--------------------- DONE ---------------------------"
}

set -e
. ./init.sh

pushd $TEST_DIR

test_feature_base_functionality
test_feature_multiple
test_feature_finish_keep

popd

